<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Giáº£i mÃ£ AUTOSAR | bbtd</title><meta name=keywords content="software"><meta name=description content="Kiáº¿n trÃºc tiÃªu chuáº©n ngÃ nh Automotive"><meta name=author content="Dung"><link rel=canonical href=https://canonical.url/to/page><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.8fe10233a706bc87f2e08b3cf97b8bd4c0a80f10675a143675d59212121037c0.css integrity="sha256-j+ECM6cGvIfy4Is8+XuL1MCoDxBnWhQ2ddWSEhIQN8A=" rel="preload stylesheet" as=style><link rel=icon href=https://du4ng.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://du4ng.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://du4ng.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://du4ng.github.io/apple-touch-icon.png><link rel=mask-icon href=https://du4ng.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://du4ng.github.io/posts/autosar/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://www.googletagmanager.com/gtag/js?id=G-F9VS7QYQ27"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-F9VS7QYQ27")}</script><meta property="og:url" content="https://du4ng.github.io/posts/autosar/"><meta property="og:site_name" content="bbtd"><meta property="og:title" content="Giáº£i mÃ£ AUTOSAR"><meta property="og:description" content="Kiáº¿n trÃºc tiÃªu chuáº©n ngÃ nh Automotive"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-05-06T00:00:00+00:00"><meta property="article:modified_time" content="2023-05-06T00:00:00+00:00"><meta property="article:tag" content="Software"><meta property="og:image" content="https://mayfest.viblo.asia/_nuxt/img/eb0fecb.svg"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://mayfest.viblo.asia/_nuxt/img/eb0fecb.svg"><meta name=twitter:title content="Giáº£i mÃ£ AUTOSAR"><meta name=twitter:description content="Kiáº¿n trÃºc tiÃªu chuáº©n ngÃ nh Automotive"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://du4ng.github.io/posts/"},{"@type":"ListItem","position":2,"name":"Giáº£i mÃ£ AUTOSAR","item":"https://du4ng.github.io/posts/autosar/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Giáº£i mÃ£ AUTOSAR","name":"Giáº£i mÃ£ AUTOSAR","description":"Kiáº¿n trÃºc tiÃªu chuáº©n ngÃ nh Automotive","keywords":["software"],"articleBody":"â€‹\nGiá»›i thiá»‡u â€‹ AUTOSAR cÃ³ váº» khÃ¡ xa láº¡ Ä‘á»‘i vá»›i ngÆ°á»i lÃ m vá» cÃ´ng nghá»‡ thÃ´ng tin, nhÆ°ng Ä‘á»‘i vá»›i nhá»¯ng báº¡n lÃ m vá» Embedded System, Ä‘áº·c biá»‡t lÃ  trong lÄ©nh vá»±c Automotive, thÃ¬ cÅ©ngâ€¦ xa láº¡ ná»‘t.\nDáº¡o má»™t vÃ²ng trÃªn Google, mÃ¬nh tháº¥y tÃ i liá»‡u vá» AUTOSAR báº±ng tiáº¿ng Anh ráº¥t chi lÃ  hÃ n lÃ¢m, cÃ²n tiáº¿ng Viá»‡t thÃ¬ háº§u nhÆ° khÃ´ng cÃ³. Theo dÃ²ng sá»± kiá»‡n MayFest2023, mÃ¬nh muá»‘n chia sáº» chÃºt kiáº¿n thá»©c Ã­t á»i mÃ  mÃ¬nh nghe lÃ©n Ä‘Æ°á»£c khi váº«n cÃ²n Äƒn bÃ¡m á»Ÿ cÃ´ng ty.\nAUTOSAR (AUTomotive Open System ARchitecture) lÃ  má»™t kiáº¿n trÃºc pháº§n má»m Ä‘Æ°á»£c tiÃªu chuáº©n hÃ³a dÃ¹ng Ä‘á»ƒ thiáº¿t káº¿ ECU trong ngÃ nh cÃ´ng nghiá»‡p Automotive. NhÆ°ng, tiÃªu chuáº©n lÃ  tiÃªu chuáº©n gÃ¬, tiÃªu chuáº©n hÃ³a nhÆ° tháº¿ nÃ o vÃ  tiÃªu chuáº©n Ä‘Ã³ náº±m á»Ÿ Ä‘Ã¢u trÃªn má»™t chiáº¿c Ã´ tÃ´ ?\nLáº¥y vÃ­ dá»¥ Ä‘Æ¡n giáº£n - trÆ°á»ng há»c. Cá»© Ä‘áº¿n cuá»‘i ká»³, sinh viÃªn cÃ³ hÃ ng tÃ¡ mÃ´n pháº£i thi, má»—i mÃ´n láº¡i lÃ  má»™t giáº£ng viÃªn khÃ¡c nhau. Äá»ƒ ná»™p bÃ i cho giáº£ng viÃªn thÃ¬ cÃ³ ráº¥t nhiá»u kÃªnh: Zalo, Gmail, LMS,â€¦ tÆ°Æ¡ng tá»± cho viá»‡c giáº£ng viÃªn pháº£i dáº¡y ráº¥t nhiá»u lá»›p. Äiá»u nÃ y khiáº¿n viá»‡c liÃªn láº¡c giá»¯a hai bÃªn dá»… gÃ¢y confused, khÃ´ng chá»‰ vÃ o lÃºc thi mÃ  cÃ²n trong quÃ¡ trÃ¬nh há»c táº­p. Váº­y, solution cho viá»‡c nÃ y lÃ  gÃ¬ ? Thi táº­p trung ! Sinh viÃªn cháº³ng cáº§n pháº£i nhá»› xem sáº½ ná»™p bÃ i cho Ã´ng tháº§y nÃ o vÃ  ná»™p qua Ä‘Ã¢u, chá»‰ viá»‡c xÃ¡ch Ä‘Ã­t Ä‘i thi rá»“i vá» chá» Ä‘iá»ƒm trÃªn trang online, nhÃ  trÆ°á»ng sáº½ lo viá»‡c cÃ²n láº¡i.\nCÃ¡i mÃ¬nh muá»‘n nÃ³i á»Ÿ Ä‘Ã¢y, Ä‘Ã³ lÃ  giá»¯a sinh viÃªn vÃ  nhÃ  trÆ°á»ng luÃ´n cÃ³ sá»± thá»‘ng nháº¥t vá» má»™t máº·t nÃ o Ä‘Ã³, cÃ³ thá»ƒ lÃ  qua hÃ¬nh thá»©c, qua format Ä‘á» thi, hoáº·c qua ká»³ sau há»c láº¡i.\nTrá»Ÿ láº¡i, Ä‘á»‘i vá»›i lÄ©nh vá»±c Automotive, sá»± phá»©c táº¡p cá»§a software trÃªn Ã´ tÃ´ ngÃ y cÃ ng cao lÃ  má»™t trong nhá»¯ng lÃ½ do chÃ­nh cho sá»± ra Ä‘á»i AUTOSAR. Do Ä‘Ã³, thá»© mÃ  chÃºng ta cáº§n chÃ­nh lÃ  sá»± thá»‘ng nháº¥t trong thiáº¿t káº¿ giá»¯a bÃªn mua, bÃªn bÃ¡n, giá»¯a pháº§n cá»©ng, pháº§n má»m vÃ  ti tá»‰ thá»© khÃ¡c ná»¯a. Cá»¥ thá»ƒ hÆ¡n, mÃ¬nh cÃ³ má»™t flow giao dá»‹ch Ä‘Æ¡n giáº£n trÃ´ng nhÆ° tháº¿ nÃ y: ã…¤ Supplier â” OEM â” End-user Hmm, váº­y ngÆ°á»i mua xe náº±m á»Ÿ Ä‘Ã¢u trong flow trÃªn ? Há» chÃ­nh lÃ  nhá»¯ng End-users, tá»©c â€œngÆ°á»i dÃ¹ng cuá»‘iâ€ trong flow nÃ y. Váº­y OEM (Original Equipment Manufacturers) á»Ÿ Ä‘Ã¢y lÃ  ai ? ChÃ­nh lÃ  cÃ¡c hÃ£ng xe: Volkswagen, BWM, Peugeot, v.v.. cÃ³ Ä‘á»§. Nhá»¯ng Ã´ng lá»›n nÃ y táº¥t nhiÃªn sáº½ khÃ´ng lÃ m ra má»™t chiáº¿c xe háº³n hoi mÃ  chá»‰ táº­p trung vÃ o sáº£n xuáº¥t thá»© mÃ  há» giá»i nháº¥t, sau Ä‘Ã³ mua nhá»¯ng component láº·t váº·t khÃ¡c, cháº³ng háº¡n nhÆ° há»‡ thá»‘ng sensor tá»« má»™t bÃªn chá»‰ chuyÃªn sáº£n xuáº¥t sensor, trong trÆ°á»ng há»£p nÃ y lÃ  ECU. CÃ¡c hÃ£ng xe pháº§n lá»›n sáº½ khÃ´ng tá»± thiáº¿t káº¿ ECU mÃ  pháº£i nhá» Ä‘áº¿n má»™t bÃªn thá»© ba, tá»©c Supplier nhÆ° Bosch, Hitachi, Continental,â€¦\nMá»i ngÆ°á»i tháº¥y Ä‘áº¥y, OEM Ä‘Ã¢u chá»‰ mua má»—i ECU mÃ  cÃ²n mua linh ta linh tinh. OEM thÃ¬ mua ráº¥t nhiá»u thá»‹t tá»« nhá»¯ng Suppliers khÃ¡c nhau, Supplier thÃ¬ bÃ¡n ráº¥t nhiá»u cÃ¡ cho nhá»¯ng OEMs khÃ¡c nhau. ÄÃ£ tháº¿, xe thÃ¬ Ä‘Ã¢u chá»‰ cÃ³ má»—i xe xÄƒng, cÃ²n cÃ³ xe Ä‘iá»‡n, xe hybrid,â€¦ NhÆ°ng dÃ¹ cho cÃ³ lÃ  xe gáº¯n pháº£n lá»±c, xe bay, xe tÃ ng hÃ¬nh Ä‘i chÄƒng ná»¯a, AUTOSAR váº«n cÃ¢n táº¥t, bá»Ÿi láº½ nhÆ° mÃ¬nh Ä‘Ã£ nÃ³i, nÃ³ Ä‘Æ°á»£c sinh ra cÅ©ng bá»Ÿi sá»± bá»™n bá» cá»§a software mÃ  ğŸ˜µâ€ğŸ’«.\nDÆ°á»›i Ä‘Ã¢y lÃ  thá»© tá»± cÃ¡c táº§ng bÃªn trong kiáº¿n trÃºc AUTOSAR tá»« cao xuá»‘ng tháº¥p:\nApplication Layer Runtime Environment Basic Software Services Layer ECU Abstraction Layer Microcontroller Abstraction Layer Complex Drivers Microcontroller ah shiet ğŸ¤“ Big brain time !!! â€‹\n1. Application Software (ASW) LÃ  táº§ng cao nháº¥t trong kiáº¿n trÃºc AUTOSAR, cÅ©ng lÃ  tháº±ng â€œgáº§nâ€ nháº¥t vá»›i ngÆ°á»i dÃ¹ng. Gáº§n á»Ÿ Ä‘Ã¢y nghÄ©a lÃ  nhá»¯ng thá»© ta cÃ³ thá»ƒ tÆ°Æ¡ng tÃ¡c trá»±c tiáº¿p, cháº³ng háº¡n nhÆ° Ä‘Ã¨n bÃ¡o trÃªn tablo, há»‡ thá»‘ng phanh, khÃ­ tháº£i, Ä‘iá»u hÃ²a, Ä‘á»“ng há»“ Ä‘o nhiÃªn liá»‡u, vÃ²ng tua, hay cáº£ mÃ n hÃ¬nh cáº£m á»©ng á»Ÿ nhá»¯ng xe Ä‘á»i má»›i.\nNhÆ°ng Ä‘Ã³ chá»‰ lÃ  bá» ná»•i cá»§a ASW, trÃ¡i tim tháº­t sá»± cá»§a táº§ng nÃ y Ä‘Æ°á»£c gá»i lÃ  cÃ¡c SWCs (Software Components). Tá»«ng chá»©c nÄƒng riÃªng biá»‡t trÃªn xe sáº½ Ä‘Æ°á»£c Ä‘áº£m nháº­n bá»Ÿi má»™t component riÃªng. MÃ¬nh sáº½ gá»i má»—i component nÃ y lÃ  má»™t â€œcá»¥câ€.\nVÃ­ dá»¥, trÃªn Ã´ tÃ´ dÄ© nhiÃªn cÃ³ mÃ¡y láº¡nh, nhÆ°ng mÃ¡y láº¡nh sáº½ khÃ´ng hoáº¡t Ä‘á»™ng má»™t mÃ¬nh. Äáº±ng sau nÃ³ lÃ  cáº£ má»™t há»‡ thá»‘ng ventilation, Ä‘Æ°á»£c kiá»ƒm soÃ¡t bá»Ÿi má»™t SWC, mÃ¬nh táº¡m gá»i lÃ  cá»¥c thÃ´ng giÃ³, cÃ³ chá»©c nÄƒng kiá»ƒm soÃ¡t lÆ°á»£ng khÃ´ng khÃ­ ra vÃ o cabin. Hoáº·c, má»™t SWC khÃ¡c lÃ  cá»¥c khÃ­ tháº£i, dá»±a vÃ o sensor Ä‘á»ƒ collect data vá» cÃ¡c thÃ nh pháº§n trong lÆ°á»£ng khÃ­ tháº£i hiá»‡n táº¡i nhÆ° NOx, CO, HC,â€¦ tá»« Ä‘Ã³ Ä‘iá»u chá»‰nh cÃ¡c tham sá»‘ Ä‘á»ƒ timing cho viá»‡c mix nhiÃªn liá»‡u vá»›i khÃ´ng khÃ­. Thá»±c táº¿, viá»‡c nÃ y cÃ²n Ä‘Ã²i há»i sá»± káº¿t há»£p giá»¯a nhiá»u SWCs nhÆ° cá»¥c Ä‘iá»u khiá»ƒn Ä‘á»™ng cÆ¡ phun, cá»¥c monitoring vÃ  diagnostic. Tháº­m chÃ­, cÃ¡c nhÃ  sáº£n xuáº¥t cÃ²n cÃ³ thá»ƒ dÃ¹ng nhá»¯ng cá»¥c cÃ³ chá»©c nÄƒng quan sÃ¡t (monitoring, diagnostic,â€¦) Ä‘á»ƒ báº¯t bá»‡nh sau má»™t thá»i gian xe Ä‘Æ°á»£c dÃ¹ng vÃ  cáº£i tiáº¿n software/hardware trong nhá»¯ng Ä‘á»i sau.\nâ€‹\nâš ï¸Táº¹o mÃ¬nh sáº½ nÃ³i vá» anh báº¡n Runtime Environment (RTE) sau. RTE Ä‘Ã³ng vai trÃ² nhÆ° cáº§u ná»‘i giÃºp hai khá»©a ASW vÃ  BSW tÃ¢m sá»± vá»›i nhau. MÃ  muá»‘n biáº¿t tÃ¢m sá»± kiá»ƒu gÃ¬ trÆ°á»›c háº¿t pháº£i biáº¿t BSW hoáº¡t Ä‘á»™ng ra sao Ä‘Ã£. â€‹\n2. Basic Software (BSW) LÃ  táº§ng tháº¥p nháº¥t cá»§a software, vÃ  cÅ©ng lÃ  táº§ng khÃ³ nhai nháº¥t ğŸ¤•.\nBSW Ä‘Æ°á»£c chia ra thÃ nh nhá»¯ng sub-layers, má»—i sub-layer cung cáº¥p tá»«ng service nháº¥t Ä‘á»‹nh cho cÃ¡c SWCs á»Ÿ táº§ng ASW.\n2.1. Service Layer LÃ  tháº±ng gáº§n nháº¥t vá»›i ASW, tháº­t ra RTE gáº§n hÆ¡n nhÆ°ng mÃ¬nh khÃ´ng coi RTE lÃ  háº³n má»™t táº§ng ğŸ¤«. Service Layer chá»‹u trÃ¡ch nhiá»‡m chÃ­nh trong viá»‡c giÃºp BSW cung cáº¥p cÃ¡c service lÃªn trÃªn ASW nhá» vÃ o API (API thÃ¬ táº§ng nÃ o cÅ©ng cÃ³ nhÃ©).\nVÃ­ dá»¥:\nLoáº¡i API Chá»©c nÄƒng Communication Giao tiáº¿p trong network cá»§a cÃ¡c ECU, gá»­i message qua CAN, LIN, FlexRay,â€¦ Diagnostic Chuáº©n Ä‘oÃ¡n lá»—i, dÃ¹ng Ä‘á»ƒ Ä‘á»c DTC (Diagnostic Trouble Codes). Time Management Kiá»ƒm soÃ¡t cÃ¡c cyclic task, trÃªn Ã´ tÃ´ cÃ³ vÃ´ sá»‘ giÃ¡ trá»‹ pháº£i Ä‘á»c trong lÃºc xe cháº¡y nhÆ° tá»‘c Ä‘á»™, nhiá»‡t Ä‘á»™,â€¦ Memory Management TÆ°Æ¡ng tá»± Time Management nhÆ°ng lÃ  kiá»ƒm soÃ¡t bá»™ nhá»› dÃ¹ng cho cÃ¡c cyclic task. VÃ  cÃ²n ráº¥t nhiá»u loáº¡i khÃ¡c nhÆ° API cho Event Management, File System hoáº·c Security.\n2.2 ECU Abstraction Layer (EAL) Sub-layer nÃ y vÃ  cáº£ sub-layer bÃªn dÆ°á»›i cá»§a BSW sáº½ hÆ¡i láº±ng nháº±ng bá»Ÿi chÃºng Ä‘á»u mang tÃ­nh â€œtrá»«u tÆ°á»£ngâ€.\nTrá»«u tÆ°á»£ng á»Ÿ Ä‘Ã¢y cÅ©ng giá»‘ng nhÆ° tÃ­nh cháº¥t trá»«u tÆ°á»£ng bÃªn OOP, Ä‘á»u mang má»¥c Ä‘Ã­ch giáº¥u Ä‘i Ä‘á»™ phá»©c táº¡p cá»§a cÃ¡c implementation, giÃºp dev viáº¿t code má»™t cÃ¡ch chuáº©n hÃ³a hÆ¡n vÃ  Ä‘á»¡ tráº§m cáº£m hÆ¡n.\nCá»¥ thá»ƒ, khi dev viáº¿t code á»Ÿ sub-layer nÃ y, há» khÃ´ng pháº£i cÄƒng máº¯t tÃ¬m cho ra Ä‘á»‹a chá»‰ cá»§a thanh ghi ADCs, ngáº¯t, timer,â€¦ mÃ  chá»‰ viá»‡c lá»¥m API, truy cáº­p vÃ o tÃ i nguyÃªn cá»§a hardware thÃ´ng qua ngoáº¡i vi, rá»“i config theo requirement. MÃ¬nh tá»«ng tháº¯c máº¯c, lÃ m sao API cÃ³ thá»ƒ compatible vá»›i cÃ¡c hardware khÃ¡c nhau á»©ng vá»›i má»—i con ECU khÃ¡c nhau trÃªn tá»«ng dÃ²ng xe khÃ¡c nhau ? Welp, nhÆ° Ä‘Ã£ nÃ³i, má»i thá»© Ä‘á»u Ä‘Ã£ Ä‘Æ°á»£c chuáº©n hÃ³a, hardware Ä‘Æ°á»£c chuáº©n hÃ³a, software Ä‘Æ°á»£c chuáº©n hÃ³a, vÃ  API cÅ©ng váº­y.\nAbstraction cÅ©ng lÃ  má»™t key principle cá»§a AUTOSAR. NhÆ° mÃ¬nh Ä‘Ã£ Ä‘á» cáº­p tá»« Ä‘áº§u, cÃ³ ráº¥t nhiá»u OEMs vÃ  Suppliers trong cuá»™c chÆ¡i nÃ y, nghÄ©a lÃ  cÃ³ cáº£ trÄƒm loáº¡i software vÃ  hardware sáº¯p sá»­a Ä‘Ã¡nh nhau. NhÆ°ng nhá» vÃ o Abstraction, software tá»« má»™t Supplier cÃ³ thá»ƒ dá»… dÃ ng Ä‘Æ°á»£c â€œtÃ¡i sá»­ dá»¥ngâ€ khi switch sang hardware platform cá»§a má»™t OEM khÃ¡c vÃ  ngÆ°á»£c láº¡i.\nNÃ³i tÃ³m láº¡i, ngoÃ i abstract giá»¯a pháº§n má»m vá»›i pháº§n má»m nhÆ° má»i ngÆ°á»i thÆ°á»ng tháº¥y, cÃ²n cÃ³ cáº£ abstract giá»¯a pháº§n má»m vÃ  pháº§n cá»©ng ğŸ¥´.\n3.2 Microcontroller Abstraction Layer (MCAL) ÄÃ¢y lÃ  tháº±ng cuá»‘i cÃ¹ng cÃ²n sÃ³t láº¡i trong má»› software, náº±m ngay trÃªn hardware.\nTháº±ng nÃ y thÃ¬ cÅ©ng khÃ´ng cÃ³ gÃ¬ phá»©c táº¡p, cÆ¡ báº£n lÃ  á»Ÿ gáº§n hardware nÃªn nguyÃªn lÃ½ khÃ¡ giá»‘ng vá»›i compiler. KhÃ¡c á»Ÿ chá»—, compiler gen ra .bin, .hex hay .obj gÃ¬ Ä‘Ã³ má»™t láº§n Ä‘á»ƒ flash xuá»‘ng rá»“i thÃ´i, cÃ²n MCAL cho phÃ©p high-level vá»›i low-level code nÃ³i chuyá»‡n vá»›i nhau trong real-time.\nTÆ°á»Ÿng tÆ°á»£ng nhÆ° nÃ y, ECU Abstraction Layer (EAL) chÃ­nh lÃ  â€œbá»™ nÃ£oâ€, trong khi Microcontroller Abstraction Layer (MCAL) Ä‘Ã³ng vai trÃ² nhÆ° má»™t â€œhá»‡ tháº§n kinhâ€. EAL gá»­i Ä‘i cÃ¡c high-level command, cÃ²n MCAL biáº¿n cÃ¡c command Ä‘Ã³ thÃ nh low-level, rá»“i má»›i Ä‘i vÃ o ECU. EAL ngá»“i trÃªn Ä‘áº§u trÃªn cá»• tháº±ng MCAL, giá»‘ng nhÆ° má»™t bá»™ nÃ£o, gá»­i tÃ­n hiá»‡u qua há»‡ tháº§n kinh Ä‘á»ƒ cÃ¡c cÆ¡ báº¯p hay ná»™i táº¡ng hoáº¡t Ä‘á»™ng theo Ã½ muá»‘n. Trong trÆ°á»ng há»£p nÃ y, EAL náº¿u muá»‘n sá»­ dá»¥ng tÃ i nguyÃªn cá»§a hardware thÃ¬ pháº£i nhá» váº£ MCAL.\n3.4 Complex Device Drivers (CDDs) Nháº­p gia tÃ¹yâ€¦ tiá»‡n, chÃºng ta cÃ³ má»™t impostor á»Ÿ Ä‘Ã¢y. KhÃ´ng pháº£i cá»© náº±m trong kiáº¿n trÃºc nÃ o lÃ  pháº£i mang háº³n quy táº¯c cá»§a kiáº¿n trÃºc Ä‘Ã³. Sáº½ cÃ³ nhá»¯ng trÆ°á»ng há»£p chÃºng ta cáº§n tá»‘c Ä‘á»™ xá»­ lÃ½ á»Ÿ má»©c cao nháº¥t, do Ä‘Ã³ pháº£i bá» qua tá»‘i Ä‘a cÃ¡c macro Ä‘á»ƒ code tháº³ng vÃ o logic, trÃ¡nh function call quÃ¡ nhiá»u gÃ¢y tÄƒng instruction trong quÃ¡ trÃ¬nh runtime. VÃ­ dá»¥ nhÆ° viá»‡c bung tÃºi khÃ­, Ä‘Ã²i há»i tá»‘c Ä‘á»™ response cá»±c kÃ¬ cao.\nDo Ä‘Ã³ náº¿u má»i ngÆ°á»i Ä‘á»ƒ Ã½, ta sáº½ tháº¥y ngoáº¡i lá»‡ khi MCU Ä‘Æ°á»£c ná»‘i tháº³ng lÃªn táº§ng trÃªn qua CDD, cáº¯t bá»›t layer Ä‘á»ƒ giáº£m time. â€‹\n4. Runtime Environment (RTE) ÄÃ¢y giá»“i Ä‘Ã´i giáº§y, cÃ¹ng quay láº¡i vá»›i ngÆ°á»i anh em thiá»‡n lÃ nh RTE.\nRTE tháº­t ra lÃ  má»™t term chung chá»© khÃ´ng chá»‰ cá»§a riÃªng ngÃ nh nhÃºng, vÃ  lÃ  má»™t environment cÃ³ liÃªn quan máº­t thiáº¿t Ä‘áº¿n â€œsystemâ€.\nMÃ¬nh chÆ°a cÃ³ cÆ¡ há»™i lÃ m nhiá»u vá»›i system nÃªn cÅ©ng khÃ´ng dÃ¡m nÃ³i nhÄƒng nÃ³i cuá»™i. Mentor cá»§a mÃ¬nh Ä‘Ã£ giáº£i thÃ­ch vá» nÃ³ 800 láº§n nhÆ°ng mÃ¬nh váº«n khÃ´ng hiá»ƒu. Btw, mÃ¬nh tá»«ng Ä‘á»c má»™t tÃ i liá»‡u nÃ³i vá» RTE nhÆ° sau:\nRTE lÃ  lá»›p pháº§n má»m trung gian giÃºp hai táº§ng ASW vÃ  BSW giao tiáº¿p vá»›i nhau. Má»¥c Ä‘Ã­ch cá»§a viá»‡c nÃ y lÃ  lÃ m cho cÃ¡c thÃ nh pháº§n pháº§n má»m Ä‘á»™c láº­p nháº¥t cÃ³ thá»ƒ Ä‘á»ƒ â€œÃ¡nh xáº¡â€ tá»›i má»™t há»‡ thá»‘ng Ä‘iá»u khiá»ƒn.\nYep, Ä‘Ãºng lÃ  khÃ´ng hiá»ƒu tháº­t.\nCÆ¡ mÃ , â€œÃ¡nh xáº¡â€ lÃ  gÃ¬ nhá»‰ ? MÃ¬nh chá»‰ nghÄ© Ä‘Æ¡n giáº£n tháº¿ nÃ y, sá»Ÿ dÄ© RTE tá»“n táº¡i lÃ  vÃ¬ AUTOSAR muá»‘n Ä‘áº£m báº£o ASW vÃ  BSW Ä‘á»™c láº­p vá»›i nhau nháº¥t cÃ³ thá»ƒ. BSW khÃ´ng chá»‰ trá»«u tÆ°á»£ng hÃ³a giá»¯a cÃ¡c sub-layers bÃªn trong mÃ¬nh mÃ  cÃ²n giá»¯a chÃ­nh báº£n thÃ¢n nÃ³ vá»›i ASW.\nGiáº£ dá»¥:\nASW sáº½ Ä‘Æ°á»£c dev 100% bá»Ÿi OEM Ä‘á»ƒ Ä‘iá»u khiá»ƒn cÃ¡c function trÃªn xe. BSW sáº½ Ä‘Æ°á»£c dev bá»Ÿi Supplier Ä‘á»ƒ cung cáº¥p cÃ¡c service cÆ¡ báº£n nháº¥t cho ASW lá»¥m vá» dÃ¹ng. TrÃªn thá»±c táº¿ con sá»‘ 100% nÃ y á»Ÿ táº§ng ASW cÃ³ thá»ƒ khÃ¡c, OEM cÃ³ thá»ƒ chá»‰ dev 75%, 50% hoáº·c quáº³ng háº¿t cho Supplier lÃ m luÃ´n tÃ¹y thuá»™c vÃ o thá»a thuáº­n hai bÃªn. VÃ¬ lÃ½ do báº£o máº­t cÃ´ng nghá»‡, pháº§n trÄƒm cÃ ng cao nghÄ©a lÃ  OEM cÃ ng khÃ´ng muá»‘n tiáº¿t lá»™ cÃ´ng nghá»‡ cá»§a há» ğŸ™„ mÃ¬nh cho lÃ  váº­y.\nDá»… tháº¥y hai khá»©a ASW vÃ  BSW há»£p tÃ¡c ráº¥t Ä‘Æ¡n giáº£n, chá»‰ viá»‡c Ä‘Æ°a vÃ  nháº­n, Ä‘á»•i láº¡i lÃ  sá»± flexibility trong kiáº¿n trÃºc má»—i tháº±ng. VÃ  â€œÃ¡nh xáº¡â€, má»™t láº§n ná»¯a, cÅ©ng lÃ  cÃ¡ch mÃ  abstraction hoáº¡t Ä‘á»™ng, káº¿t ná»‘i hai tháº±ng nÃ y vá»›i nhau, dá»‹ch sang tiáº¿ng ngÆ°á»i nghÄ©a lÃ  â€œmappingâ€.\nNhÆ°ng map lÃ  map cÃ¡i gÃ¬ ? VÃ¢ng, chÃ­nh lÃ  SWCs. ÄÆ¡n giáº£n, quÃ¡ trÃ¬nh mapping chá»‰ Ä‘á»‹nh SWC nÃ o sáº½ Ä‘Æ°á»£c map Ä‘áº¿n ECU nÃ o, cháº³ng háº¡n cá»¥m ABS, cá»¥m cá»­a sá»•, cá»¥m tÃºi khÃ­,â€¦\nLá»›p RTE trong dá»± Ã¡n thá»±c táº¿ Ä‘Æ°á»£c macro cá»±c kÃ¬ nhiá»u cÅ©ng bá»Ÿi Ä‘áº·c trÆ°ng cá»§a AUTOSAR. CÃ³ Ä‘áº¿n vÃ i chá»¥c file .c vÃ  .h báº¯t Ä‘áº§u báº±ng Rte nhÆ° Rte.c, Rte.h, Rte_Lib.h, Rte_Type.h,â€¦\nâ€‹\n5. Microcontroller (MCU) Updating\nâ€‹\n","wordCount":"2118","inLanguage":"en","image":"https://mayfest.viblo.asia/_nuxt/img/eb0fecb.svg","datePublished":"2023-05-06T00:00:00Z","dateModified":"2023-05-06T00:00:00Z","author":{"@type":"Person","name":"Dung"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://du4ng.github.io/posts/autosar/"},"publisher":{"@type":"Organization","name":"bbtd","logo":{"@type":"ImageObject","url":"https://du4ng.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://du4ng.github.io/ accesskey=h title="Dung (Alt + H)"><img src=https://du4ng.github.io/apple-touch-icon.png alt aria-label=logo height=35>Dung</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://du4ng.github.io/tags title=Tags><span>Tags</span></a></li><li><a href=https://beacons.ai/livin/room title=Vault><span>Vault</span>&nbsp;
<svg fill="none" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class="post-title entry-hint-parent">Giáº£i mÃ£ AUTOSAR</h1><div class=post-description>Kiáº¿n trÃºc tiÃªu chuáº©n ngÃ nh Automotive</div><div class=post-meta><span title='2023-05-06 00:00:00 +0000 UTC'>May 6, 2023</span>&nbsp;Â·&nbsp;10 min&nbsp;Â·&nbsp;Dung&nbsp;|&nbsp;<a href=https://viblo.asia/p/giai-ma-autosar-kien-truc-de-doi-nganh-automotive-phan-1-EoW4ox6zJml rel="noopener noreferrer edit" target=_blank>Xem táº¡i ğ•ğˆğğ‹ğ</a></div></header><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#giá»›i-thiá»‡u>Giá»›i thiá»‡u</a></li><li><a href=#1-application-software-asw>1. Application Software (ASW)</a></li><li><a href=#2-basic-software-bsw>2. Basic Software (BSW)</a><ul><li><a href=#21-service-layer>2.1. Service Layer</a></li><li><a href=#22-ecu-abstraction-layer-eal>2.2 ECU Abstraction Layer (EAL)</a></li><li><a href=#32-microcontroller-abstraction-layer-mcal>3.2 Microcontroller Abstraction Layer (MCAL)</a></li><li><a href=#34-complex-device-drivers-cdds>3.4 Complex Device Drivers (CDDs)</a></li></ul></li><li><a href=#4-runtime-environment-rte>4. Runtime Environment (RTE)</a></li><li><a href=#5-microcontroller-mcu>5. Microcontroller (MCU)</a></li></ul></nav></div></details></div><div class=post-content><p>â€‹</p><h2 id=giá»›i-thiá»‡u>Giá»›i thiá»‡u<a hidden class=anchor aria-hidden=true href=#giá»›i-thiá»‡u>#</a></h2><p>â€‹
AUTOSAR cÃ³ váº» khÃ¡ xa láº¡ Ä‘á»‘i vá»›i ngÆ°á»i lÃ m vá» cÃ´ng nghá»‡ thÃ´ng tin, nhÆ°ng Ä‘á»‘i vá»›i nhá»¯ng báº¡n lÃ m vá» Embedded System, Ä‘áº·c biá»‡t lÃ  trong lÄ©nh vá»±c Automotive, thÃ¬ cÅ©ng&mldr; xa láº¡ ná»‘t.</p><p>Dáº¡o má»™t vÃ²ng trÃªn Google, mÃ¬nh tháº¥y tÃ i liá»‡u vá» AUTOSAR báº±ng tiáº¿ng Anh ráº¥t chi lÃ  hÃ n lÃ¢m, cÃ²n tiáº¿ng Viá»‡t thÃ¬ háº§u nhÆ° khÃ´ng cÃ³. Theo dÃ²ng sá»± kiá»‡n <strong>MayFest2023</strong>, mÃ¬nh muá»‘n chia sáº» chÃºt kiáº¿n thá»©c Ã­t á»i mÃ  mÃ¬nh nghe lÃ©n Ä‘Æ°á»£c khi váº«n cÃ²n Äƒn bÃ¡m á»Ÿ cÃ´ng ty.</p><p><img alt="Baby with his first word" loading=lazy src=/posts/autosar/meme.png></p><p><strong>AUTOSAR</strong> (<strong>AUT</strong>omotive <strong>O</strong>pen <strong>S</strong>ystem <strong>AR</strong>chitecture) lÃ  má»™t kiáº¿n trÃºc pháº§n má»m Ä‘Æ°á»£c tiÃªu chuáº©n hÃ³a dÃ¹ng Ä‘á»ƒ thiáº¿t káº¿ ECU trong ngÃ nh cÃ´ng nghiá»‡p Automotive. NhÆ°ng, tiÃªu chuáº©n lÃ  tiÃªu chuáº©n gÃ¬, tiÃªu chuáº©n hÃ³a nhÆ° tháº¿ nÃ o vÃ  tiÃªu chuáº©n Ä‘Ã³ náº±m á»Ÿ Ä‘Ã¢u trÃªn má»™t chiáº¿c Ã´ tÃ´ ?</p><p>Láº¥y vÃ­ dá»¥ Ä‘Æ¡n giáº£n - trÆ°á»ng há»c. Cá»© Ä‘áº¿n cuá»‘i ká»³, sinh viÃªn cÃ³ hÃ ng tÃ¡ mÃ´n pháº£i thi, má»—i mÃ´n láº¡i lÃ  má»™t giáº£ng viÃªn khÃ¡c nhau. Äá»ƒ ná»™p bÃ i cho giáº£ng viÃªn thÃ¬ cÃ³ ráº¥t nhiá»u kÃªnh: Zalo, Gmail, LMS,&mldr; tÆ°Æ¡ng tá»± cho viá»‡c giáº£ng viÃªn pháº£i dáº¡y ráº¥t nhiá»u lá»›p. Äiá»u nÃ y khiáº¿n viá»‡c liÃªn láº¡c giá»¯a hai bÃªn dá»… gÃ¢y confused, khÃ´ng chá»‰ vÃ o lÃºc thi mÃ  cÃ²n trong quÃ¡ trÃ¬nh há»c táº­p. Váº­y, solution cho viá»‡c nÃ y lÃ  gÃ¬ ? Thi táº­p trung ! Sinh viÃªn cháº³ng cáº§n pháº£i nhá»› xem sáº½ ná»™p bÃ i cho Ã´ng tháº§y nÃ o vÃ  ná»™p qua Ä‘Ã¢u, chá»‰ viá»‡c xÃ¡ch Ä‘Ã­t Ä‘i thi rá»“i vá» chá» Ä‘iá»ƒm trÃªn trang online, nhÃ  trÆ°á»ng sáº½ lo viá»‡c cÃ²n láº¡i.</p><p>CÃ¡i mÃ¬nh muá»‘n nÃ³i á»Ÿ Ä‘Ã¢y, Ä‘Ã³ lÃ  giá»¯a sinh viÃªn vÃ  nhÃ  trÆ°á»ng luÃ´n cÃ³ sá»± <strong>thá»‘ng nháº¥t</strong> vá» má»™t máº·t nÃ o Ä‘Ã³, cÃ³ thá»ƒ lÃ  qua hÃ¬nh thá»©c, qua format Ä‘á» thi, hoáº·c qua ká»³ sau há»c láº¡i.</p><p>Trá»Ÿ láº¡i, Ä‘á»‘i vá»›i lÄ©nh vá»±c Automotive, sá»± phá»©c táº¡p cá»§a software trÃªn Ã´ tÃ´ ngÃ y cÃ ng cao lÃ  má»™t trong nhá»¯ng lÃ½ do chÃ­nh cho sá»± ra Ä‘á»i AUTOSAR. Do Ä‘Ã³, thá»© mÃ  chÃºng ta cáº§n chÃ­nh lÃ  sá»± <strong>thá»‘ng nháº¥t</strong> trong thiáº¿t káº¿ giá»¯a bÃªn mua, bÃªn bÃ¡n, giá»¯a pháº§n cá»©ng, pháº§n má»m vÃ  ti tá»‰ thá»© khÃ¡c ná»¯a. Cá»¥ thá»ƒ hÆ¡n, mÃ¬nh cÃ³ má»™t flow giao dá»‹ch Ä‘Æ¡n giáº£n trÃ´ng nhÆ° tháº¿ nÃ y:<br><br><br>ã…¤ Supplier â” OEM â” End-user<br><br><br>Hmm, váº­y ngÆ°á»i mua xe náº±m á»Ÿ Ä‘Ã¢u trong flow trÃªn ? Há» chÃ­nh lÃ  nhá»¯ng <strong>End-users</strong>, tá»©c &ldquo;ngÆ°á»i dÃ¹ng cuá»‘i&rdquo; trong flow nÃ y. Váº­y <strong>OEM (Original Equipment Manufacturers)</strong> á»Ÿ Ä‘Ã¢y lÃ  ai ? ChÃ­nh lÃ  cÃ¡c hÃ£ng xe: Volkswagen, BWM, Peugeot, v.v.. cÃ³ Ä‘á»§. Nhá»¯ng Ã´ng lá»›n nÃ y táº¥t nhiÃªn sáº½ khÃ´ng lÃ m ra má»™t chiáº¿c xe háº³n hoi mÃ  chá»‰ táº­p trung vÃ o sáº£n xuáº¥t thá»© mÃ  há» giá»i nháº¥t, sau Ä‘Ã³ mua nhá»¯ng component láº·t váº·t khÃ¡c, cháº³ng háº¡n nhÆ° há»‡ thá»‘ng sensor tá»« má»™t bÃªn chá»‰ chuyÃªn sáº£n xuáº¥t sensor, trong trÆ°á»ng há»£p nÃ y lÃ  ECU. CÃ¡c hÃ£ng xe pháº§n lá»›n sáº½ khÃ´ng tá»± thiáº¿t káº¿ ECU mÃ  pháº£i nhá» Ä‘áº¿n má»™t bÃªn thá»© ba, tá»©c <strong>Supplier</strong> nhÆ° Bosch, Hitachi, Continental,&mldr;</p><p>Má»i ngÆ°á»i tháº¥y Ä‘áº¥y, OEM Ä‘Ã¢u chá»‰ mua má»—i ECU mÃ  cÃ²n mua linh ta linh tinh. OEM thÃ¬ mua ráº¥t nhiá»u thá»‹t tá»« nhá»¯ng Suppliers khÃ¡c nhau, Supplier thÃ¬ bÃ¡n ráº¥t nhiá»u cÃ¡ cho nhá»¯ng OEMs khÃ¡c nhau. ÄÃ£ tháº¿, xe thÃ¬ Ä‘Ã¢u chá»‰ cÃ³ má»—i xe xÄƒng, cÃ²n cÃ³ xe Ä‘iá»‡n, xe hybrid,&mldr; NhÆ°ng dÃ¹ cho cÃ³ lÃ  xe gáº¯n pháº£n lá»±c, xe bay, xe tÃ ng hÃ¬nh Ä‘i chÄƒng ná»¯a, AUTOSAR váº«n cÃ¢n táº¥t, bá»Ÿi láº½ nhÆ° mÃ¬nh Ä‘Ã£ nÃ³i, nÃ³ Ä‘Æ°á»£c sinh ra cÅ©ng bá»Ÿi sá»± bá»™n bá» cá»§a software mÃ  ğŸ˜µâ€ğŸ’«.</p><p>DÆ°á»›i Ä‘Ã¢y lÃ  thá»© tá»± cÃ¡c táº§ng bÃªn trong kiáº¿n trÃºc AUTOSAR tá»« cao xuá»‘ng tháº¥p:</p><p><img loading=lazy src=https://images.viblo.asia/e6a569fb-6539-49e0-8cde-187527574b1f.png></p><ul><li><strong>Application Layer</strong></li><li><strong>Runtime Environment</strong></li><li><strong>Basic Software</strong><ul><li>Services Layer</li><li>ECU Abstraction Layer</li><li>Microcontroller Abstraction Layer</li><li>Complex Drivers</li></ul></li><li><strong>Microcontroller</strong></li></ul><p><br><br><br>ah shiet ğŸ¤“ Big brain time !!!<br><br>â€‹</p><h2 id=1-application-software-asw>1. Application Software (ASW)<a hidden class=anchor aria-hidden=true href=#1-application-software-asw>#</a></h2><p><img alt="Application Software Layer" loading=lazy src=/posts/autosar/ASW.png></p><p>LÃ  táº§ng cao nháº¥t trong kiáº¿n trÃºc AUTOSAR, cÅ©ng lÃ  tháº±ng &ldquo;gáº§n&rdquo; nháº¥t vá»›i ngÆ°á»i dÃ¹ng. Gáº§n á»Ÿ Ä‘Ã¢y nghÄ©a lÃ  nhá»¯ng thá»© ta cÃ³ thá»ƒ tÆ°Æ¡ng tÃ¡c trá»±c tiáº¿p, cháº³ng háº¡n nhÆ° Ä‘Ã¨n bÃ¡o trÃªn tablo, há»‡ thá»‘ng phanh, khÃ­ tháº£i, Ä‘iá»u hÃ²a, Ä‘á»“ng há»“ Ä‘o nhiÃªn liá»‡u, vÃ²ng tua, hay cáº£ mÃ n hÃ¬nh cáº£m á»©ng á»Ÿ nhá»¯ng xe Ä‘á»i má»›i.</p><p>NhÆ°ng Ä‘Ã³ chá»‰ lÃ  bá» ná»•i cá»§a ASW, trÃ¡i tim tháº­t sá»± cá»§a táº§ng nÃ y Ä‘Æ°á»£c gá»i lÃ  cÃ¡c <strong>SWCs</strong> (Software Components). Tá»«ng chá»©c nÄƒng riÃªng biá»‡t trÃªn xe sáº½ Ä‘Æ°á»£c Ä‘áº£m nháº­n bá»Ÿi má»™t component riÃªng. MÃ¬nh sáº½ gá»i má»—i component nÃ y lÃ  má»™t &ldquo;cá»¥c&rdquo;.</p><p>VÃ­ dá»¥, trÃªn Ã´ tÃ´ dÄ© nhiÃªn cÃ³ mÃ¡y láº¡nh, nhÆ°ng mÃ¡y láº¡nh sáº½ khÃ´ng hoáº¡t Ä‘á»™ng má»™t mÃ¬nh. Äáº±ng sau nÃ³ lÃ  cáº£ má»™t há»‡ thá»‘ng ventilation, Ä‘Æ°á»£c kiá»ƒm soÃ¡t bá»Ÿi má»™t SWC, mÃ¬nh táº¡m gá»i lÃ  cá»¥c thÃ´ng giÃ³, cÃ³ chá»©c nÄƒng kiá»ƒm soÃ¡t lÆ°á»£ng khÃ´ng khÃ­ ra vÃ o cabin. Hoáº·c, má»™t SWC khÃ¡c lÃ  cá»¥c khÃ­ tháº£i, dá»±a vÃ o sensor Ä‘á»ƒ collect data vá» cÃ¡c thÃ nh pháº§n trong lÆ°á»£ng khÃ­ tháº£i hiá»‡n táº¡i nhÆ° NOx, CO, HC,&mldr; tá»« Ä‘Ã³ Ä‘iá»u chá»‰nh cÃ¡c tham sá»‘ Ä‘á»ƒ timing cho viá»‡c mix nhiÃªn liá»‡u vá»›i khÃ´ng khÃ­. Thá»±c táº¿, viá»‡c nÃ y cÃ²n Ä‘Ã²i há»i sá»± káº¿t há»£p giá»¯a nhiá»u SWCs nhÆ° cá»¥c Ä‘iá»u khiá»ƒn Ä‘á»™ng cÆ¡ phun, cá»¥c monitoring vÃ  diagnostic. Tháº­m chÃ­, cÃ¡c nhÃ  sáº£n xuáº¥t cÃ²n cÃ³ thá»ƒ dÃ¹ng nhá»¯ng cá»¥c cÃ³ chá»©c nÄƒng quan sÃ¡t (monitoring, diagnostic,&mldr;) Ä‘á»ƒ báº¯t bá»‡nh sau má»™t thá»i gian xe Ä‘Æ°á»£c dÃ¹ng vÃ  cáº£i tiáº¿n software/hardware trong nhá»¯ng Ä‘á»i sau.</p><p><br>â€‹</p><table><thead><tr><th>âš ï¸Táº¹o mÃ¬nh sáº½ nÃ³i vá» anh báº¡n <strong>Runtime Environment (RTE)</strong> sau. RTE Ä‘Ã³ng vai trÃ² nhÆ° cáº§u ná»‘i giÃºp hai khá»©a ASW vÃ  BSW tÃ¢m sá»± vá»›i nhau. MÃ  muá»‘n biáº¿t tÃ¢m sá»± kiá»ƒu gÃ¬ trÆ°á»›c háº¿t pháº£i biáº¿t BSW hoáº¡t Ä‘á»™ng ra sao Ä‘Ã£.</th></tr></thead><tbody></tbody></table><p><br>â€‹</p><h2 id=2-basic-software-bsw>2. Basic Software (BSW)<a hidden class=anchor aria-hidden=true href=#2-basic-software-bsw>#</a></h2><p><img alt="Basic Software Layer" loading=lazy src=/posts/autosar/BSW.png></p><p>LÃ  táº§ng tháº¥p nháº¥t cá»§a software, vÃ  cÅ©ng lÃ  táº§ng khÃ³ nhai nháº¥t ğŸ¤•.</p><p>BSW Ä‘Æ°á»£c chia ra thÃ nh nhá»¯ng sub-layers, má»—i sub-layer cung cáº¥p tá»«ng service nháº¥t Ä‘á»‹nh cho cÃ¡c SWCs á»Ÿ táº§ng ASW.</p><h3 id=21-service-layer>2.1. Service Layer<a hidden class=anchor aria-hidden=true href=#21-service-layer>#</a></h3><p><img alt="Service Layer" loading=lazy src=/posts/autosar/SL.png></p><p>LÃ  tháº±ng gáº§n nháº¥t vá»›i ASW, tháº­t ra RTE gáº§n hÆ¡n nhÆ°ng mÃ¬nh khÃ´ng coi RTE lÃ  háº³n má»™t táº§ng ğŸ¤«. Service Layer chá»‹u trÃ¡ch nhiá»‡m chÃ­nh trong viá»‡c giÃºp BSW cung cáº¥p cÃ¡c service lÃªn trÃªn ASW nhá» vÃ o API (API thÃ¬ táº§ng nÃ o cÅ©ng cÃ³ nhÃ©).</p><p>VÃ­ dá»¥:</p><table><thead><tr><th>Loáº¡i API</th><th>Chá»©c nÄƒng</th></tr></thead><tbody><tr><td>Communication</td><td>Giao tiáº¿p trong network cá»§a cÃ¡c ECU, gá»­i message qua CAN, LIN, FlexRay,&mldr;</td></tr><tr><td>Diagnostic</td><td>Chuáº©n Ä‘oÃ¡n lá»—i, dÃ¹ng Ä‘á»ƒ Ä‘á»c DTC (Diagnostic Trouble Codes).</td></tr><tr><td>Time Management</td><td>Kiá»ƒm soÃ¡t cÃ¡c cyclic task, trÃªn Ã´ tÃ´ cÃ³ vÃ´ sá»‘ giÃ¡ trá»‹ pháº£i Ä‘á»c trong lÃºc xe cháº¡y nhÆ° tá»‘c Ä‘á»™, nhiá»‡t Ä‘á»™,&mldr;</td></tr><tr><td>Memory Management</td><td>TÆ°Æ¡ng tá»± Time Management nhÆ°ng lÃ  kiá»ƒm soÃ¡t bá»™ nhá»› dÃ¹ng cho cÃ¡c cyclic task.</td></tr></tbody></table><p>VÃ  cÃ²n ráº¥t nhiá»u loáº¡i khÃ¡c nhÆ° API cho Event Management, File System hoáº·c Security.</p><h3 id=22-ecu-abstraction-layer-eal>2.2 ECU Abstraction Layer (EAL)<a hidden class=anchor aria-hidden=true href=#22-ecu-abstraction-layer-eal>#</a></h3><p>Sub-layer nÃ y vÃ  cáº£ sub-layer bÃªn dÆ°á»›i cá»§a BSW sáº½ hÆ¡i láº±ng nháº±ng bá»Ÿi chÃºng Ä‘á»u mang tÃ­nh &ldquo;trá»«u tÆ°á»£ng&rdquo;.</p><p><img alt="ECU Abstraction Layer" loading=lazy src=/posts/autosar/EAL.png></p><p><strong>Trá»«u tÆ°á»£ng</strong> á»Ÿ Ä‘Ã¢y cÅ©ng giá»‘ng nhÆ° tÃ­nh cháº¥t trá»«u tÆ°á»£ng bÃªn OOP, Ä‘á»u mang má»¥c Ä‘Ã­ch giáº¥u Ä‘i Ä‘á»™ phá»©c táº¡p cá»§a cÃ¡c implementation, giÃºp dev viáº¿t code má»™t cÃ¡ch chuáº©n hÃ³a hÆ¡n vÃ  Ä‘á»¡ tráº§m cáº£m hÆ¡n.</p><p>Cá»¥ thá»ƒ, khi dev viáº¿t code á»Ÿ sub-layer nÃ y, há» khÃ´ng pháº£i cÄƒng máº¯t tÃ¬m cho ra Ä‘á»‹a chá»‰ cá»§a thanh ghi ADCs, ngáº¯t, timer,&mldr; mÃ  chá»‰ viá»‡c lá»¥m API, truy cáº­p vÃ o tÃ i nguyÃªn cá»§a hardware thÃ´ng qua ngoáº¡i vi, rá»“i config theo requirement. MÃ¬nh tá»«ng tháº¯c máº¯c, lÃ m sao API cÃ³ thá»ƒ compatible vá»›i cÃ¡c hardware khÃ¡c nhau á»©ng vá»›i má»—i con ECU khÃ¡c nhau trÃªn tá»«ng dÃ²ng xe khÃ¡c nhau ? Welp, nhÆ° Ä‘Ã£ nÃ³i, má»i thá»© Ä‘á»u Ä‘Ã£ Ä‘Æ°á»£c chuáº©n hÃ³a, hardware Ä‘Æ°á»£c chuáº©n hÃ³a, software Ä‘Æ°á»£c chuáº©n hÃ³a, vÃ  API cÅ©ng váº­y.</p><p><strong>Abstraction</strong> cÅ©ng lÃ  má»™t <em>key principle</em> cá»§a AUTOSAR. NhÆ° mÃ¬nh Ä‘Ã£ Ä‘á» cáº­p tá»« Ä‘áº§u, cÃ³ ráº¥t nhiá»u OEMs vÃ  Suppliers trong cuá»™c chÆ¡i nÃ y, nghÄ©a lÃ  cÃ³ cáº£ trÄƒm loáº¡i software vÃ  hardware sáº¯p sá»­a Ä‘Ã¡nh nhau. NhÆ°ng nhá» vÃ o Abstraction, software tá»« má»™t Supplier cÃ³ thá»ƒ dá»… dÃ ng Ä‘Æ°á»£c &ldquo;tÃ¡i sá»­ dá»¥ng&rdquo; khi switch sang hardware platform cá»§a má»™t OEM khÃ¡c vÃ  ngÆ°á»£c láº¡i.</p><p>NÃ³i tÃ³m láº¡i, ngoÃ i abstract giá»¯a pháº§n má»m vá»›i pháº§n má»m nhÆ° má»i ngÆ°á»i thÆ°á»ng tháº¥y, cÃ²n cÃ³ cáº£ abstract giá»¯a pháº§n má»m vÃ  pháº§n cá»©ng ğŸ¥´.</p><h3 id=32-microcontroller-abstraction-layer-mcal>3.2 Microcontroller Abstraction Layer (MCAL)<a hidden class=anchor aria-hidden=true href=#32-microcontroller-abstraction-layer-mcal>#</a></h3><p>ÄÃ¢y lÃ  tháº±ng cuá»‘i cÃ¹ng cÃ²n sÃ³t láº¡i trong má»› software, náº±m ngay trÃªn hardware.</p><p><img alt="Microcontroller Abstraction Layer" loading=lazy src=/posts/autosar/MCAL.png></p><p>Tháº±ng nÃ y thÃ¬ cÅ©ng khÃ´ng cÃ³ gÃ¬ phá»©c táº¡p, cÆ¡ báº£n lÃ  á»Ÿ gáº§n hardware nÃªn nguyÃªn lÃ½ khÃ¡ giá»‘ng vá»›i compiler. KhÃ¡c á»Ÿ chá»—, compiler gen ra .bin, .hex hay .obj gÃ¬ Ä‘Ã³ má»™t láº§n Ä‘á»ƒ flash xuá»‘ng rá»“i thÃ´i, cÃ²n MCAL cho phÃ©p high-level vá»›i low-level code nÃ³i chuyá»‡n vá»›i nhau trong real-time.</p><p>TÆ°á»Ÿng tÆ°á»£ng nhÆ° nÃ y, <strong>ECU Abstraction Layer (EAL)</strong> chÃ­nh lÃ  &ldquo;bá»™ nÃ£o&rdquo;, trong khi <strong>Microcontroller Abstraction Layer (MCAL)</strong> Ä‘Ã³ng vai trÃ² nhÆ° má»™t &ldquo;há»‡ tháº§n kinh&rdquo;. EAL gá»­i Ä‘i cÃ¡c high-level command, cÃ²n MCAL biáº¿n cÃ¡c command Ä‘Ã³ thÃ nh low-level, rá»“i má»›i Ä‘i vÃ o ECU. EAL ngá»“i trÃªn Ä‘áº§u trÃªn cá»• tháº±ng MCAL, giá»‘ng nhÆ° má»™t bá»™ nÃ£o, gá»­i tÃ­n hiá»‡u qua há»‡ tháº§n kinh Ä‘á»ƒ cÃ¡c cÆ¡ báº¯p hay ná»™i táº¡ng hoáº¡t Ä‘á»™ng theo Ã½ muá»‘n. Trong trÆ°á»ng há»£p nÃ y, EAL náº¿u muá»‘n sá»­ dá»¥ng tÃ i nguyÃªn cá»§a hardware thÃ¬ pháº£i nhá» váº£ MCAL.</p><h3 id=34-complex-device-drivers-cdds>3.4 Complex Device Drivers (CDDs)<a hidden class=anchor aria-hidden=true href=#34-complex-device-drivers-cdds>#</a></h3><p><img alt="Complex Device Drivers" loading=lazy src=/posts/autosar/CDD.png></p><p>Nháº­p gia tÃ¹y&mldr; tiá»‡n, chÃºng ta cÃ³ má»™t impostor á»Ÿ Ä‘Ã¢y. KhÃ´ng pháº£i cá»© náº±m trong kiáº¿n trÃºc nÃ o lÃ  pháº£i mang háº³n quy táº¯c cá»§a kiáº¿n trÃºc Ä‘Ã³. Sáº½ cÃ³ nhá»¯ng trÆ°á»ng há»£p chÃºng ta cáº§n tá»‘c Ä‘á»™ xá»­ lÃ½ á»Ÿ má»©c cao nháº¥t, do Ä‘Ã³ pháº£i bá» qua tá»‘i Ä‘a cÃ¡c macro Ä‘á»ƒ code tháº³ng vÃ o logic, trÃ¡nh function call quÃ¡ nhiá»u gÃ¢y tÄƒng instruction trong quÃ¡ trÃ¬nh runtime. VÃ­ dá»¥ nhÆ° viá»‡c bung tÃºi khÃ­, Ä‘Ã²i há»i tá»‘c Ä‘á»™ response cá»±c kÃ¬ cao.</p><p>Do Ä‘Ã³ náº¿u má»i ngÆ°á»i Ä‘á»ƒ Ã½, ta sáº½ tháº¥y ngoáº¡i lá»‡ khi MCU Ä‘Æ°á»£c ná»‘i tháº³ng lÃªn táº§ng trÃªn qua CDD, cáº¯t bá»›t layer Ä‘á»ƒ giáº£m time.<br><br><br>â€‹</p><h2 id=4-runtime-environment-rte>4. Runtime Environment (RTE)<a hidden class=anchor aria-hidden=true href=#4-runtime-environment-rte>#</a></h2><p>ÄÃ¢y giá»“i Ä‘Ã´i giáº§y, cÃ¹ng quay láº¡i vá»›i ngÆ°á»i anh em thiá»‡n lÃ nh RTE.</p><p><img alt="Runtime Environment" loading=lazy src=/posts/autosar/RTE.png></p><p>RTE tháº­t ra lÃ  má»™t term chung chá»© khÃ´ng chá»‰ cá»§a riÃªng ngÃ nh nhÃºng, vÃ  lÃ  má»™t environment cÃ³ liÃªn quan máº­t thiáº¿t Ä‘áº¿n &ldquo;system&rdquo;.</p><p>MÃ¬nh chÆ°a cÃ³ cÆ¡ há»™i lÃ m nhiá»u vá»›i system nÃªn cÅ©ng khÃ´ng dÃ¡m nÃ³i nhÄƒng nÃ³i cuá»™i. Mentor cá»§a mÃ¬nh Ä‘Ã£ giáº£i thÃ­ch vá» nÃ³ 800 láº§n nhÆ°ng mÃ¬nh váº«n khÃ´ng hiá»ƒu. Btw, mÃ¬nh tá»«ng Ä‘á»c má»™t tÃ i liá»‡u nÃ³i vá» RTE nhÆ° sau:</p><blockquote><p><em>RTE lÃ  lá»›p pháº§n má»m trung gian giÃºp hai táº§ng ASW vÃ  BSW giao tiáº¿p vá»›i nhau. Má»¥c Ä‘Ã­ch cá»§a viá»‡c nÃ y lÃ  lÃ m cho cÃ¡c thÃ nh pháº§n pháº§n má»m Ä‘á»™c láº­p nháº¥t cÃ³ thá»ƒ Ä‘á»ƒ &ldquo;Ã¡nh xáº¡&rdquo; tá»›i má»™t há»‡ thá»‘ng Ä‘iá»u khiá»ƒn.</em></p></blockquote><p>Yep, Ä‘Ãºng lÃ  khÃ´ng hiá»ƒu tháº­t.</p><p>CÆ¡ mÃ , &ldquo;<strong>Ã¡nh xáº¡</strong>&rdquo; lÃ  gÃ¬ nhá»‰ ? MÃ¬nh chá»‰ nghÄ© Ä‘Æ¡n giáº£n tháº¿ nÃ y, sá»Ÿ dÄ© RTE tá»“n táº¡i lÃ  vÃ¬ AUTOSAR muá»‘n Ä‘áº£m báº£o ASW vÃ  BSW Ä‘á»™c láº­p vá»›i nhau nháº¥t cÃ³ thá»ƒ. BSW khÃ´ng chá»‰ trá»«u tÆ°á»£ng hÃ³a giá»¯a cÃ¡c sub-layers bÃªn trong mÃ¬nh mÃ  cÃ²n giá»¯a chÃ­nh báº£n thÃ¢n nÃ³ vá»›i ASW.</p><p>Giáº£ dá»¥:</p><ul><li>ASW sáº½ Ä‘Æ°á»£c dev 100% bá»Ÿi OEM Ä‘á»ƒ Ä‘iá»u khiá»ƒn cÃ¡c function trÃªn xe.</li><li>BSW sáº½ Ä‘Æ°á»£c dev bá»Ÿi Supplier Ä‘á»ƒ cung cáº¥p cÃ¡c service cÆ¡ báº£n nháº¥t cho ASW lá»¥m vá» dÃ¹ng.</li></ul><p>TrÃªn thá»±c táº¿ con sá»‘ 100% nÃ y á»Ÿ táº§ng ASW cÃ³ thá»ƒ khÃ¡c, OEM cÃ³ thá»ƒ chá»‰ dev 75%, 50% hoáº·c quáº³ng háº¿t cho Supplier lÃ m luÃ´n tÃ¹y thuá»™c vÃ o thá»a thuáº­n hai bÃªn. VÃ¬ lÃ½ do báº£o máº­t cÃ´ng nghá»‡, pháº§n trÄƒm cÃ ng cao nghÄ©a lÃ  OEM cÃ ng khÃ´ng muá»‘n tiáº¿t lá»™ cÃ´ng nghá»‡ cá»§a há» ğŸ™„ mÃ¬nh cho lÃ  váº­y.</p><p>Dá»… tháº¥y hai khá»©a ASW vÃ  BSW há»£p tÃ¡c ráº¥t Ä‘Æ¡n giáº£n, chá»‰ viá»‡c Ä‘Æ°a vÃ  nháº­n, Ä‘á»•i láº¡i lÃ  sá»± flexibility trong kiáº¿n trÃºc má»—i tháº±ng. VÃ  &ldquo;<strong>Ã¡nh xáº¡</strong>&rdquo;, má»™t láº§n ná»¯a, cÅ©ng lÃ  cÃ¡ch mÃ  abstraction hoáº¡t Ä‘á»™ng, káº¿t ná»‘i hai tháº±ng nÃ y vá»›i nhau, dá»‹ch sang tiáº¿ng ngÆ°á»i nghÄ©a lÃ  &ldquo;<strong>mapping</strong>&rdquo;.</p><p>NhÆ°ng map lÃ  map cÃ¡i gÃ¬ ? VÃ¢ng, chÃ­nh lÃ  SWCs. ÄÆ¡n giáº£n, quÃ¡ trÃ¬nh mapping chá»‰ Ä‘á»‹nh SWC nÃ o sáº½ Ä‘Æ°á»£c map Ä‘áº¿n ECU nÃ o, cháº³ng háº¡n cá»¥m ABS, cá»¥m cá»­a sá»•, cá»¥m tÃºi khÃ­,&mldr;</p><p>Lá»›p RTE trong dá»± Ã¡n thá»±c táº¿ Ä‘Æ°á»£c macro cá»±c kÃ¬ nhiá»u cÅ©ng bá»Ÿi Ä‘áº·c trÆ°ng cá»§a AUTOSAR. CÃ³ Ä‘áº¿n vÃ i chá»¥c file .c vÃ  .h báº¯t Ä‘áº§u báº±ng Rte nhÆ° Rte.c, Rte.h, Rte_Lib.h, Rte_Type.h,&mldr;</p><p><br><br><br>â€‹</p><h2 id=5-microcontroller-mcu>5. Microcontroller (MCU)<a hidden class=anchor aria-hidden=true href=#5-microcontroller-mcu>#</a></h2><p>Updating</p><p><br><br>â€‹</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://du4ng.github.io/tags/software/>Software</a></li></ul></footer></article></main><footer class=footer><span>bbtd
| <button onclick='window.open("https://www.facebook.com/me")' style=text-decoration:underline target=_blank>who is viewing</button></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>